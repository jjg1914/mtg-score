{"version":3,"sources":["index.coffee","index.js","mtg/mtg-index.tpl.jade","mtg/mtg-menu.tpl.jade","mtg/mtg-number-input.tpl.jade","mtg/mtg-settings.tpl.jade","mtg/mtg-vibrate.coffee","mtg/mtg-vibrate.js","mtg/mtg-settings-controller.coffee","mtg/mtg-settings-controller.js","mtg/mtg-score-format.coffee","mtg/mtg-score-format.js","mtg/mtg-number-input.coffee","mtg/mtg-number-input.js","mtg/mtg-menu-controller.coffee","mtg/mtg-menu-controller.js","mtg/mtg-index-controller.coffee","mtg/mtg-index-controller.js","mtg/mtg-controller.coffee","mtg/mtg-controller.js","config.state.coffee","config.state.js","config.hover.coffee","config.hover.js","config.hammer.coffee","config.hammer.js"],"names":["angular","module","call","this","run","$templateCache","put","factory","navigator","vibrate","webkitVibrate","mozVibrate","msVibrate","millieseconds","controller","$scope","filter","value","initial","e","i","len","ref","history","length","historyLatest","directive","mtgVibrate","restrict","replace","scope","templateUrl","link","decrement","increment","$state","newGame","players","push","name","go","$timeout","_saveHistory","player","historyTimeout","cancel","decrementScore","clearScore","invertScore","_navigate","settings","initialScore","navigate","direction","index","Hammer","DIRECTION_LEFT","indexOf","current","config","$stateProvider","$urlRouterProvider","state","url","otherwise","document","body","addEventListener","classes","results","getElementsByTagName","className","split","join","splice","hammerDefaultOptsProvider","set","recognizers","Tap","event","Press","Swipe","DIRECTION_HORIZONTAL"],"mappings":"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","file":"index.min.js","sourcesContent":["angular.module \"mtg\", [ \"ui.router\", \"angular-gestures\", \"sprintf\" ]\n","(function() {\n  angular.module(\"mtg\", [\"ui.router\", \"angular-gestures\", \"sprintf\"]);\n\n}).call(this);\n",".mtg-score-board\n  .mtg-score(ng-repeat=\"player in players\")\n    .mtg-score-display\n      span.mtg-jumbo(hm-tap=\"decrementScore(player)\" hm-hold=\"invertScore(player)\")\n        | {{ player | mtgScoreFormat : settings.initialScore }}\n    .mtg-score-history-latest(\n        ng-if=\"player.historyLatest != null\"\n        hm-hold=\"clearScore(player)\")\n      span(ng-class=\"{ 'mtg-bg-negative': player.historyLatest < 0, 'mtg-bg-positive': player.historyLatest >= 0 }\")\n        | {{ \"%+i\" | sprintf : player.historyLatest }}\n    .mtg-score-history\n      .mtg-score-history-item(\n        ng-class=\"{ 'mtg-text-negative': item < 0, 'mtg-text-positive': item >= 0 }\"\n        ng-repeat=\"item in player.history track by $index\")\n        | {{ \"%+i\" | sprintf : item }}\n","ul.mtg-menu\n  li.mtg-menu-item(hm-tap=\"newGame()\") New Game\n  li.mtg-menu-item Roll\n  li.mtg-menu-item Lookup\n",".mtg-input.mtg-number-input\n  .mtg-number-input-display {{ value }}\n  .mtg-number-input-control\n    span.mtg-number-input-control-item(\n      ng-class=\"{'mtg-text-muted': value >= 50}\"\n      hm-tap=\"increment()\")\n      | +\n    span.mtg-number-input-control-item(\n      ng-class=\"{'mtg-text-muted': value <= 10}\"\n      hm-tap=\"decrement()\")\n      | &#8722;\n","form\n  .mtg-form-input\n    label(for=\"initial-score\") Initial Score\n    mtg-number-input(value=\"settings.initialScore\")\n","angular.module(\"mtg\").factory \"mtgVibrate\", ->\n  navigator.vibrate ?= navigator.webkitVibrate || navigator.mozVibrate ||\n    navigator.msVibrate\n\n  (millieseconds) ->\n    if navigator.vibrate\n      navigator.vibrate millieseconds\n","(function() {\n  angular.module(\"mtg\").factory(\"mtgVibrate\", function() {\n    if (navigator.vibrate == null) {\n      navigator.vibrate = navigator.webkitVibrate || navigator.mozVibrate || navigator.msVibrate;\n    }\n    return function(millieseconds) {\n      if (navigator.vibrate) {\n        return navigator.vibrate(millieseconds);\n      }\n    };\n  });\n\n}).call(this);\n","angular.module(\"mtg\").controller \"mtgSettingsController\", ($scope) ->\n","(function() {\n  angular.module(\"mtg\").controller(\"mtgSettingsController\", function($scope) {});\n\n}).call(this);\n","angular.module(\"mtg\").filter \"mtgScoreFormat\", ->\n  (value,initial) ->\n    initial += e for e in value.history\n    initial += value.historyLatest if value.historyLatest?\n    initial\n","(function() {\n  angular.module(\"mtg\").filter(\"mtgScoreFormat\", function() {\n    return function(value, initial) {\n      var e, i, len, ref;\n      ref = value.history;\n      for (i = 0, len = ref.length; i < len; i++) {\n        e = ref[i];\n        initial += e;\n      }\n      if (value.historyLatest != null) {\n        initial += value.historyLatest;\n      }\n      return initial;\n    };\n  });\n\n}).call(this);\n","angular.module(\"mtg\").directive \"mtgNumberInput\", (mtgVibrate)->\n  restrict: \"E\"\n  replace: true\n  scope:\n    value: \"=\"\n  templateUrl: \"mtg/mtg-number-input.tpl.html\"\n  link: ($scope) ->\n    $scope.decrement = ->\n      if $scope.value > 10\n        $scope.value -= 10\n        mtgVibrate 20\n\n    $scope.increment = ->\n      if $scope.value < 50\n        $scope.value += 10\n        mtgVibrate 20\n","(function() {\n  angular.module(\"mtg\").directive(\"mtgNumberInput\", function(mtgVibrate) {\n    return {\n      restrict: \"E\",\n      replace: true,\n      scope: {\n        value: \"=\"\n      },\n      templateUrl: \"mtg/mtg-number-input.tpl.html\",\n      link: function($scope) {\n        $scope.decrement = function() {\n          if ($scope.value > 10) {\n            $scope.value -= 10;\n            return mtgVibrate(20);\n          }\n        };\n        return $scope.increment = function() {\n          if ($scope.value < 50) {\n            $scope.value += 10;\n            return mtgVibrate(20);\n          }\n        };\n      }\n    };\n  });\n\n}).call(this);\n","angular.module(\"mtg\").controller \"mtgMenuController\", ($scope,$state,mtgVibrate) ->\n\n  $scope.newGame = ->\n    mtgVibrate 20\n    $scope.players.length = 0\n    $scope.players.push\n      name: \"Player 1\"\n      history: []\n      historyLatest: null\n    $scope.players.push\n      name: \"Player 2\"\n      history: []\n      historyLatest: null\n    $state.go \"index\"\n","(function() {\n  angular.module(\"mtg\").controller(\"mtgMenuController\", function($scope, $state, mtgVibrate) {\n    return $scope.newGame = function() {\n      mtgVibrate(20);\n      $scope.players.length = 0;\n      $scope.players.push({\n        name: \"Player 1\",\n        history: [],\n        historyLatest: null\n      });\n      $scope.players.push({\n        name: \"Player 2\",\n        history: [],\n        historyLatest: null\n      });\n      return $state.go(\"index\");\n    };\n  });\n\n}).call(this);\n","angular.module(\"mtg\").controller \"mtgIndexController\", ($scope,$timeout,\n  mtgVibrate) ->\n\n  _saveHistory = (player) ->\n    if player.historyTimeout?\n      $timeout.cancel player.historyTimeout\n    player.historyTimeout = $timeout ->\n      player.history.push player.historyLatest if player.historyLatest\n      player.historyLatest = null\n      delete player.historyTimeout\n    , 5000\n\n  $scope.decrementScore = (player) ->\n    if player.historyLatest?\n      player.historyLatest += if player.historyLatest > 0 then 1 else -1\n    else\n      player.historyLatest = -1\n    mtgVibrate 20\n    _saveHistory player\n\n  $scope.clearScore = (player) ->\n    player.historyLatest = null\n    if player.historyTimeout?\n      mtgVibrate 20\n      $timeout.cancel player.historyTimeout\n      delete player.historyTimeout\n\n  $scope.invertScore = (player) ->\n    if player.historyLatest?\n      player.historyLatest *= -1\n      mtgVibrate 20\n    _saveHistory player\n","(function() {\n  angular.module(\"mtg\").controller(\"mtgIndexController\", function($scope, $timeout, mtgVibrate) {\n    var _saveHistory;\n    _saveHistory = function(player) {\n      if (player.historyTimeout != null) {\n        $timeout.cancel(player.historyTimeout);\n      }\n      return player.historyTimeout = $timeout(function() {\n        if (player.historyLatest) {\n          player.history.push(player.historyLatest);\n        }\n        player.historyLatest = null;\n        return delete player.historyTimeout;\n      }, 5000);\n    };\n    $scope.decrementScore = function(player) {\n      if (player.historyLatest != null) {\n        player.historyLatest += player.historyLatest > 0 ? 1 : -1;\n      } else {\n        player.historyLatest = -1;\n      }\n      mtgVibrate(20);\n      return _saveHistory(player);\n    };\n    $scope.clearScore = function(player) {\n      player.historyLatest = null;\n      if (player.historyTimeout != null) {\n        mtgVibrate(20);\n        $timeout.cancel(player.historyTimeout);\n        return delete player.historyTimeout;\n      }\n    };\n    return $scope.invertScore = function(player) {\n      if (player.historyLatest != null) {\n        player.historyLatest *= -1;\n        mtgVibrate(20);\n      }\n      return _saveHistory(player);\n    };\n  });\n\n}).call(this);\n","angular.module(\"mtg\").controller \"mtgController\", ($scope,$state) ->\n\n  _navigate = [\n    \"menu\"\n    \"index\"\n    \"settings\"\n  ]\n\n  $scope.players = [\n    {\n      name: \"Player 1\"\n      history: []\n      historyLatest: null\n    }\n    {\n      name: \"Player 2\"\n      history: []\n      historyLatest: null\n    }\n  ]\n\n  $scope.settings =\n    initialScore: 20\n\n  $scope.navigate = (e) ->\n    direction = if e.direction == Hammer.DIRECTION_LEFT then 1 else -1\n    index = _navigate.indexOf($state.current.name) + direction\n    if index >= 0 and index < _navigate.length\n      $state.go _navigate[index]\n","(function() {\n  angular.module(\"mtg\").controller(\"mtgController\", function($scope, $state) {\n    var _navigate;\n    _navigate = [\"menu\", \"index\", \"settings\"];\n    $scope.players = [\n      {\n        name: \"Player 1\",\n        history: [],\n        historyLatest: null\n      }, {\n        name: \"Player 2\",\n        history: [],\n        historyLatest: null\n      }\n    ];\n    $scope.settings = {\n      initialScore: 20\n    };\n    return $scope.navigate = function(e) {\n      var direction, index;\n      direction = e.direction === Hammer.DIRECTION_LEFT ? 1 : -1;\n      index = _navigate.indexOf($state.current.name) + direction;\n      if (index >= 0 && index < _navigate.length) {\n        return $state.go(_navigate[index]);\n      }\n    };\n  });\n\n}).call(this);\n","angular.module(\"mtg\").config ($stateProvider,$urlRouterProvider) ->\n  $stateProvider\n    .state \"index\",\n      url: \"/\"\n      templateUrl: \"mtg/mtg-index.tpl.html\"\n      controller: \"mtgIndexController\"\n    .state \"menu\",\n      url: \"/menu\"\n      templateUrl: \"mtg/mtg-menu.tpl.html\"\n      controller: \"mtgMenuController\"\n    .state \"settings\",\n      url: \"/settings\"\n      templateUrl: \"mtg/mtg-settings.tpl.html\"\n      controller: \"mtgSettingsController\"\n\n  $urlRouterProvider.otherwise \"/\"\n","(function() {\n  angular.module(\"mtg\").config(function($stateProvider, $urlRouterProvider) {\n    $stateProvider.state(\"index\", {\n      url: \"/\",\n      templateUrl: \"mtg/mtg-index.tpl.html\",\n      controller: \"mtgIndexController\"\n    }).state(\"menu\", {\n      url: \"/menu\",\n      templateUrl: \"mtg/mtg-menu.tpl.html\",\n      controller: \"mtgMenuController\"\n    }).state(\"settings\", {\n      url: \"/settings\",\n      templateUrl: \"mtg/mtg-settings.tpl.html\",\n      controller: \"mtgSettingsController\"\n    });\n    return $urlRouterProvider.otherwise(\"/\");\n  });\n\n}).call(this);\n","angular.module(\"mtg\").config  ->\n  document.body.addEventListener \"mouseenter\", ->\n    for e in document.getElementsByTagName \"body\"\n      classes = e.className.split /\\s+/\n      if classes.indexOf(\"mtg-hover\") == -1\n        classes.push \"mtg-hover\"\n      e.className = classes.join \" \"\n\n  document.body.addEventListener \"mouseleave\", ->\n    for e in document.getElementsByTagName \"body\"\n      classes = e.className.split /\\s+/\n      if (index = classes.indexOf(\"mtg-hover\") > -1)\n        classes.splice index, 1\n      e.className = classes.join \" \"\n","(function() {\n  angular.module(\"mtg\").config(function() {\n    document.body.addEventListener(\"mouseenter\", function() {\n      var classes, e, i, len, ref, results;\n      ref = document.getElementsByTagName(\"body\");\n      results = [];\n      for (i = 0, len = ref.length; i < len; i++) {\n        e = ref[i];\n        classes = e.className.split(/\\s+/);\n        if (classes.indexOf(\"mtg-hover\") === -1) {\n          classes.push(\"mtg-hover\");\n        }\n        results.push(e.className = classes.join(\" \"));\n      }\n      return results;\n    });\n    return document.body.addEventListener(\"mouseleave\", function() {\n      var classes, e, i, index, len, ref, results;\n      ref = document.getElementsByTagName(\"body\");\n      results = [];\n      for (i = 0, len = ref.length; i < len; i++) {\n        e = ref[i];\n        classes = e.className.split(/\\s+/);\n        if ((index = classes.indexOf(\"mtg-hover\") > -1)) {\n          classes.splice(index, 1);\n        }\n        results.push(e.className = classes.join(\" \"));\n      }\n      return results;\n    });\n  });\n\n}).call(this);\n","angular.module(\"mtg\").config (hammerDefaultOptsProvider) ->\n  hammerDefaultOptsProvider.set\n    recognizers: [\n      [ Hammer.Tap, { event: \"tap\" } ]\n      [ Hammer.Press, { event: \"press\" } ]\n      [ Hammer.Swipe,\n        event: \"swipe\",\n        direction: Hammer.DIRECTION_HORIZONTAL\n      ]\n    ]\n","(function() {\n  angular.module(\"mtg\").config(function(hammerDefaultOptsProvider) {\n    return hammerDefaultOptsProvider.set({\n      recognizers: [\n        [\n          Hammer.Tap, {\n            event: \"tap\"\n          }\n        ], [\n          Hammer.Press, {\n            event: \"press\"\n          }\n        ], [\n          Hammer.Swipe, {\n            event: \"swipe\",\n            direction: Hammer.DIRECTION_HORIZONTAL\n          }\n        ]\n      ]\n    });\n  });\n\n}).call(this);\n"],"sourceRoot":"/source/"}