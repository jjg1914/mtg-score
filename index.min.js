(function(){angular.module("mtg",["ui.router","angular-gestures","sprintf"])}).call(this),angular.module("mtg").run(["$templateCache",function(t){t.put("mtg/mtg-boolean-input.tpl.html",'<div class="mtg-input mtg-boolean-input"><span hm-tap="toggle">{{ value ? "Yes" : "No" }}</span></div>'),t.put("mtg/mtg-index.tpl.html",'<div class="mtg-score-board"><div ng-repeat="player in players" class="mtg-score"><div class="mtg-score-display"><div hm-tap="decrementScore(player)" hm-hold="invertScore(player)" class="mtg-score-hitbox"><span class="mtg-jumbo">{{ player | mtgScoreFormat : settings.initialScore }}</span></div></div><div ng-if="player.historyLatest != null" hm-hold="clearScore(player)" class="mtg-score-history-latest"><span ng-class="{ \'mtg-bg-negative\': player.historyLatest &lt; 0, \'mtg-bg-positive\': player.historyLatest &gt;= 0 }">{{ "%+i" | sprintf : player.historyLatest }}</span></div><div class="mtg-score-history"><div ng-class="{ \'mtg-text-negative\': item &lt; 0, \'mtg-text-positive\': item &gt;= 0 }" ng-repeat="item in player.history track by $index" class="mtg-score-history-item">{{ "%+i" | sprintf : item }}</div></div></div></div>'),t.put("mtg/mtg-menu.tpl.html",'<ul class="mtg-menu"><li hm-tap="newGame()" class="mtg-menu-item">New Game</li><li ui-sref="roll" class="mtg-menu-item">Roll</li><li class="mtg-menu-item">Lookup</li></ul>'),t.put("mtg/mtg-number-input.tpl.html",'<div class="mtg-input mtg-number-input"><div class="mtg-number-input-display">{{ format | sprintf : value }}</div><div class="mtg-number-input-control"><span ng-class="{\'mtg-text-muted\': value &gt;= max}" hm-tap="increment()" class="mtg-number-input-control-item">+</span><span ng-class="{\'mtg-text-muted\': value &lt;= min}" hm-tap="decrement()" class="mtg-number-input-control-item">&#8722;</span></div></div>'),t.put("mtg/mtg-roll.tpl.html",'<div class="mtg-roll"><div class="mtg-roll-inner"><span hm-tap="toggleRoll()" class="mtg-extra-jumbo">{{ value }}</span></div></div>'),t.put("mtg/mtg-settings.tpl.html",'<form><div class="mtg-form-input"><label for="initial-score">Initial Score</label><mtg-number-input value="settings.initialScore" min="10" max="50" step="10"></mtg-number-input></div><div class="mtg-form-input"><label for="score-delay">Score Delay </label><mtg-number-input value="settings.scoreDelay" min="1" max="10"></mtg-number-input></div><div class="mtg-form-input"><label for="roll">Roll</label><mtg-number-input value="settings.roll" min="6" max="20"></mtg-number-input></div><div class="mtg-form-input"><label for="roll-offset">Roll Offset</label><mtg-boolean-input value="settings.rollOffset"></mtg-boolean-input></div></form>')}]),function(){angular.module("mtg").factory("mtgVibrate",function(){return null==navigator.vibrate&&(navigator.vibrate=navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate),function(t){return navigator.vibrate?navigator.vibrate(t):void 0}})}.call(this),function(){angular.module("mtg").controller("mtgSettingsController",["$scope",function(t){}])}.call(this),function(){angular.module("mtg").filter("mtgScoreFormat",function(){return function(t,e){var l,n,r,i;for(i=t.history,n=0,r=i.length;r>n;n++)l=i[n],e+=l;return null!=t.historyLatest&&(e+=t.historyLatest),e}})}.call(this),function(){angular.module("mtg").controller("mtgRollController",["$scope","$interval",function(t,e){return t.toggleRoll=function(){return null==t.interval?t.interval=e(function(){var e;for(e=t.value;e===t.value;)e=Math.floor(Math.random()*t.settings.roll),t.settings.rollOffset&&(e+=1);return t.value=e},100):(t.value=Math.floor(Math.random()*t.settings.roll),t.settings.rollOffset&&(t.value+=1),e.cancel(t.interval),delete t.interval)},t.toggleRoll(),t.$on("$destroy",function(){return null!=t.interval?e.cancel(t.interval):void 0})}])}.call(this),function(){angular.module("mtg").directive("mtgNumberInput",["mtgVibrate",function(t){return{restrict:"E",replace:!0,scope:{value:"=",min:"=",max:"=",step:"=",format:"@"},templateUrl:"mtg/mtg-number-input.tpl.html",link:function(e){return null==e.format&&(e.format="%i"),e.decrement=function(){return e.value>e.min?(e.value-=e.step||1,t(20)):void 0},e.increment=function(){return e.value<e.max?(e.value+=e.step||1,t(20)):void 0}}}}])}.call(this),function(){angular.module("mtg").controller("mtgMenuController",["$scope","$state","mtgVibrate",function(t,e,l){return t.newGame=function(){return l(20),t.players.length=0,t.players.push({name:"Player 1",history:[],historyLatest:null}),t.players.push({name:"Player 2",history:[],historyLatest:null}),e.go("index")}}])}.call(this),function(){angular.module("mtg").controller("mtgIndexController",["$scope","$timeout","mtgVibrate",function(t,e,l){var n;return n=function(l){return null!=l.historyTimeout&&e.cancel(l.historyTimeout),l.historyTimeout=e(function(){return l.historyLatest&&l.history.push(l.historyLatest),l.historyLatest=null,delete l.historyTimeout},1e3*t.settings.scoreDelay)},t.decrementScore=function(t){return null!=t.historyLatest?t.historyLatest+=t.historyLatest>0?1:-1:t.historyLatest=-1,l(20),n(t)},t.clearScore=function(t){return t.historyLatest=null,null!=t.historyTimeout?(l(20),e.cancel(t.historyTimeout),delete t.historyTimeout):void 0},t.invertScore=function(t){return null!=t.historyLatest?t.historyLatest*=-1:t.historyLatest=1,l(20),n(t)}}])}.call(this),function(){angular.module("mtg").controller("mtgController",["$scope","$state",function(t,e){var l;return l=["menu","index","settings"],t.players=[{name:"Player 1",history:[],historyLatest:null},{name:"Player 2",history:[],historyLatest:null}],t.settings=localStorage["mtg-settings"]?JSON.parse(localStorage["mtg-settings"]):{initialScore:20,roll:10,rollOffset:!1,scoreDelay:5},window.addEventListener("beforeunload",function(){return localStorage["mtg-settings"]=JSON.stringify(t.settings)}),t.navigate=function(t){var n,r;return n=t.direction===Hammer.DIRECTION_LEFT?1:-1,r=l.indexOf(e.current.name),-1===r?e.go("index"):(r+=n,r>=0&&r<l.length?e.go(l[r]):void 0)}}])}.call(this),function(){angular.module("mtg").directive("mtgBooleanInput",["mtgVibrate",function(t){return{restrict:"E",replace:!0,scope:{value:"="},templateUrl:"mtg/mtg-boolean-input.tpl.html",link:function(e){return e.toggle=function(){return t(20),e.value=!e.value}}}}])}.call(this),function(){angular.module("mtg").config(["$stateProvider","$urlRouterProvider",function(t,e){return t.state("index",{url:"/",templateUrl:"mtg/mtg-index.tpl.html",controller:"mtgIndexController"}).state("menu",{url:"/menu",templateUrl:"mtg/mtg-menu.tpl.html",controller:"mtgMenuController"}).state("roll",{url:"/roll",templateUrl:"mtg/mtg-roll.tpl.html",controller:"mtgRollController"}).state("settings",{url:"/settings",templateUrl:"mtg/mtg-settings.tpl.html",controller:"mtgSettingsController"}),e.otherwise("/")}])}.call(this),function(){angular.module("mtg").config(function(){return document.body.addEventListener("mouseenter",function(){var t,e,l,n,r,i;for(r=document.getElementsByTagName("body"),i=[],l=0,n=r.length;n>l;l++)e=r[l],t=e.className.split(/\s+/),-1===t.indexOf("mtg-hover")&&t.push("mtg-hover"),i.push(e.className=t.join(" "));return i}),document.body.addEventListener("mouseleave",function(){var t,e,l,n,r,i,o;for(i=document.getElementsByTagName("body"),o=[],l=0,r=i.length;r>l;l++)e=i[l],t=e.className.split(/\s+/),(n=t.indexOf("mtg-hover")>-1)&&t.splice(n,1),o.push(e.className=t.join(" "));return o})})}.call(this),function(){angular.module("mtg").config(["hammerDefaultOptsProvider",function(t){return t.set({recognizers:[[Hammer.Tap,{event:"tap"}],[Hammer.Press,{event:"press"}],[Hammer.Swipe,{event:"swipe",direction:Hammer.DIRECTION_HORIZONTAL}]]})}])}.call(this);
//# sourceMappingURL=index.min.js.map